import type { DecisionTree } from "../decision/decisionTree";

export const chapter4_tree: DecisionTree = {
  id: "ch4",
  title: "Глава 4 — Ловильный инструмент: выбор и эксплуатация",
  startNodeId: "q_tool_group",
  nodes: {
    q_tool_group: {
      id: "q_tool_group",
      type: "question",
      title: "Что нужно сделать инструментом?",
      input: "select",
      options: [
        { value: "4_1", label: "4.1 Общие положения (эксплуатация)" },
        { value: "4_2", label: "4.2 Ловители с промывкой" },
        { value: "4_3", label: "4.3 Метчики" },
        { value: "4_4", label: "4.4 Колокола" },
        { value: "4_5", label: "4.5 Центрирующие приспособления" },
        { value: "4_6", label: "4.6 Труболовки" },
        { value: "4_7", label: "4.7 Фрезеры" },
        { value: "4_8", label: "4.8 Фрезеры‑ловители магнитные" },
        { value: "4_9", label: "4.9 Устройства для удаления мелкого металла" },
        { value: "4_10", label: "4.10 Устройства для ликвидации прихватов" },
        { value: "4_11", label: "4.11 Торпеды" },
        { value: "4_12", label: "4.12 Труборезки" },
        { value: "4_13", label: "4.13 Прихватоопределители" },
        { value: "4_14", label: "4.14 Печати" },
        { value: "4_15", label: "4.15 Инструмент для извлечения турбобуров" },
        { value: "4_16", label: "4.16 Отводные крючки" },
        { value: "4_17", label: "4.17 Ерши" },
        { value: "4_18", label: "4.18 Отклонители" },
      ],
      edges: [
        { when: { in: ["4_1","4_2","4_3","4_4","4_5","4_6","4_7","4_8","4_9","4_10","4_11","4_12","4_13","4_14","4_15","4_16","4_17","4_18"] }, to: "r_tool_plan" },
      ],
    },

    r_tool_plan: {
      id: "r_tool_plan",
      type: "result",
      severity: "medium",
      title: "План выбора и подготовки ловильного инструмента",
      actions: [
        "Уточнить объект ловли (что именно осталось/застряло) и геометрию (диаметры/резьбы/интервал).",
        "При необходимости выполнить диагностику печатью/прихватоопределителем.",
        "Выбрать класс инструмента (колокол/метчик/труболовка/фрезер/магнитный/ёрш/труборезка и т.д.).",
        "Проверить комплектность и исправность, соответствие диаметрам и условиям.",
        "Подготовить план «как извлечь инструмент, если он сам зааварит» (страховка решения).",
        "Спуск и работа с контролем нагрузок, момента и циркуляции.",
      ],
      notes: [
        "Практическое правило: прежде чем спускать инструмент, заранее понимать, как его извлечь при возможной аварии.",
      ],
      references: [{ chapter: "Гл.4", section: "общие положения 4.1" }],
    },
  },
};
