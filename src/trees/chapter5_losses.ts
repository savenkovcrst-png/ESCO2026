import type { DecisionTree } from "../decision/decisionTree";

export const chapter5_tree: DecisionTree = {
  id: "ch5",
  title: "Глава 5 — Борьба с поглощениями: диагностика, классификация, изоляция",
  startNodeId: "q_loss_section",
  nodes: {
    q_loss_section: {
      id: "q_loss_section",
      type: "question",
      title: "На каком этапе нужна помощь?",
      input: "select",
      options: [
        { value: "5_1", label: "5.1 Природа поглощений" },
        { value: "5_2", label: "5.2 Предупреждение поглощений" },
        { value: "5_3", label: "5.3 Исследование поглощающих скважин" },
        { value: "5_4", label: "5.4 Классификация зон и выбор способов изоляции" },
        { value: "5_5", label: "5.5 Тампонажные смеси" },
        { value: "5_6", label: "5.6 Доставка смесей в зону" },
        { value: "5_7", label: "5.7 Намыв наполнителей" },
        { value: "5_8", label: "5.8 Приготовление быстросхватывающихся смесей" },
        { value: "5_9", label: "5.9 Забойные смесители" },
        { value: "5_10", label: "5.10 Пакеры" },
        { value: "5_11", label: "5.11 Устройства перекрытия зон" },
        { value: "5_12", label: "5.12 Другие методы изоляции" },
      ],
      edges: [
        { when: { in: ["5_1","5_2","5_3","5_4","5_5","5_6","5_7","5_8","5_9","5_10","5_11","5_12"] }, to: "r_loss_plan" },
      ],
    },

    r_loss_plan: {
      id: "r_loss_plan",
      type: "result",
      severity: "high",
      title: "Универсальный алгоритм при поглощении (потеря циркуляции)",
      actions: [
        "Не допускать усугубления: контролировать давление/режим и не «раскрывать» поглощение без необходимости.",
        "Определить интервал поглощения (исследование): глубина начала, интенсивность, характер приемистости.",
        "Классифицировать зону и выбрать метод: тампонажные смеси/пасты, намыв наполнителей, перекрывающие устройства, бурение без циркуляции с последующим перекрытием и др.",
        "Подобрать состав смеси под условия скважины (текучесть, плотность близкая к раствору, регулируемое схватывание и набор прочности, устойчивость к разбавлению).",
        "Доставить смесь в зону (пакеры, устройства перекрытия, забойные смесители) и выполнить закачку/задавливание по технологии.",
        "Проверить эффект: восстановление циркуляции, устойчивость режима; при неуспехе — корректировать состав/метод и повторять.",
      ],
      notes: [
        "Требования к тампонажным смесям: текучесть на время операции, плотность близкая к буровому раствору, регулируемое схватывание, быстрый набор прочности и др.",
      ],
      references: [
        { chapter: "Гл.5", section: "5.4 классификация и выбор способов" },
        { chapter: "Гл.5", section: "5.5 требования к тампонажным смесям" },
      ],
    },
  },
};
